import{a as P,o as C,f as O,g as s,a6 as Y,n as Z,C as M,A as D,r as b,v as f,ar as L,K as x,I as A,J as o,t,j as e,h,L as u,N as G,s as j,O as T,e as ee,F as I,B as U,$ as F,k as q}from"./app-DnLddAJs.js";import{E as J}from"./index-rewuoyOe.js";import{E as oe,a as te}from"./index-jqJVByGZ.js";import{E as ne}from"./index-B9k0DMYb.js";import"./index-NTbdbBV3.js";import"./index-OovTSBc5.js";import"./isEqual-Dl1q-O91.js";import"./index-PG5R4vn9.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-CwUutAAD.js";import"./castArray-DDedigbR.js";const se={class:"card"},le=P({__name:"Card",props:{full:Boolean},setup(V){return(c,m)=>(C(),O("div",{class:Z(["card-container",{"card-container-full":V.full}])},[s("div",se,[Y(c.$slots,"default",{},void 0,!0)])],2))}}),B=M(le,[["__scopeId","data-v-798fd364"]]),ie={style:{"min-width":"300px"}},ae={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},re={class:"mt-4 mb-2"},ce={class:"mr-2"},ue={class:"mt-4 mb-2"},de={class:"mr-2"},me={class:"text-right mt-2"},pe={class:"mt-4 mb-2"},ve={class:"mr-2"},fe={class:"text-right mt-2"},ge=P({__name:"ConnectionConfig",setup(V){const c=D(),m=b(!1),d=b(!1);f.on("importConfirm",()=>{m.value=!0}).on("importWorkspaceConfirm",()=>{d.value=!0}).on("importResult",({success:l,message:n,cancel:S})=>{if(m.value=!1,d.value=!1,S)return;L({duration:l?1e3:2e3,message:n,type:l?"success":"error"})});const _=l=>{f.emit("editConfig",l)},r=l=>{f.emit("exportConfig",{workspace:l===!0,withQueryFiles:c.uiState.consoleOption.exportWithQueryFiles})},p=(l={})=>{f.emit("importConfig",l)};return(l,n)=>{const S=x("vsc-switch"),v=x("vsc-button"),E=J,z=x("pay-badge");return C(),A(B,{class:"!mb-3"},{default:o(()=>[s("div",ie,[s("div",ae,t(l.$t("console.configuration")),1),s("section",re,[s("span",ce,t(l.$t("console.exportWithQueryFiles"))+":",1),e(S,{modelValue:h(c).uiState.consoleOption.exportWithQueryFiles,"onUpdate:modelValue":n[0]||(n[0]=g=>h(c).uiState.consoleOption.exportWithQueryFiles=g),onChange:n[1]||(n[1]=g=>h(c).upState("consoleOption"))},null,8,["modelValue"])]),s("section",ue,[e(z,{left:0},{default:o(()=>[s("span",de,t(l.$t("connect.current"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",disabled:!h(c).isPay,size:"mini",onClick:n[2]||(n[2]=g=>_(!0))},null,8,["disabled"]),e(v,{icon:"codicon-arrow-down",disabled:!h(c).isPay,size:"mini",onClick:n[3]||(n[3]=g=>r(!0))},null,8,["disabled"]),e(E,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",disabled:!h(c).isPay,size:"mini",onClick:n[7]||(n[7]=g=>p({workspace:!0}))},null,8,["disabled"])]),default:o(()=>[s("p",null,t(l.$t("console.mergeConfirm")),1),s("div",me,[e(v,{type:"secondary",size:"mini",onClick:n[4]||(n[4]=g=>d.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(v,{onClick:n[5]||(n[5]=g=>p({type:"merge",workspace:!0}))},{default:o(()=>[u(t(l.$t("console.merge")),1)]),_:1}),e(v,{onClick:n[6]||(n[6]=g=>p({type:"overwrite",workspace:!0}))},{default:o(()=>[u(t(l.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),_:1})]),s("section",pe,[s("span",ve,t(l.$t("connect.global"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",size:"mini",onClick:_},{default:o(()=>[u(t(l.$t("console.edit")),1)]),_:1}),e(v,{icon:"codicon-arrow-down",size:"mini",onClick:r},{default:o(()=>[u(t(l.$t("console.export")),1)]),_:1}),e(E,{placement:"top",visible:m.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",size:"mini",onClick:n[11]||(n[11]=g=>p())},{default:o(()=>[u(t(l.$t("console.import")),1)]),_:1})]),default:o(()=>[s("p",null,t(l.$t("console.mergeConfirm")),1),s("div",fe,[e(v,{type:"secondary",onClick:n[8]||(n[8]=g=>m.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(v,{onClick:n[9]||(n[9]=g=>p({type:"merge"}))},{default:o(()=>[u(t(l.$t("console.merge")),1)]),_:1}),e(v,{onClick:n[10]||(n[10]=g=>p({type:"overwrite"}))},{default:o(()=>[u(t(l.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])])])]),_:1})}}}),_e={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},ye={class:"my-2"},Ce={class:"mr-2"},$e={style:{"margin-top":"5px","margin-bottom":"10px"}},be={style:{"text-align":"right",margin:"0"}},ke={style:{"margin-top":"5px","margin-bottom":"10px"}},we={style:{"text-align":"right",margin:"0"}},he={style:{"margin-top":"5px","margin-bottom":"10px"}},Se={style:{"text-align":"right",margin:"0"}},ze={style:{"margin-top":"20px"}},Ve=P({__name:"CloudSync",setup(V){const c=D(),m=b(!1),d=b(!1),_=b(!1),r=b(!1),p=b(null),l=b(!1),n=b(!1),S=b(!1),v=b(!1);G(()=>{m.value=c.config.autoSync,f.on("downloadConfirm",()=>{S.value=!1,r.value=!0}).on("downloadResult",({success:i,message:a})=>{S.value=!1,L({duration:i?1e3:3e3,message:a,type:i?"success":"error"})}).on("uploadRes",({success:i,message:a})=>{l.value=!1,L({duration:i?1e3:3e3,message:a,type:i?"success":"error"})}).on("removeRes",({success:i,message:a})=>{n.value=!1,L({duration:i?1e3:3e3,message:a,type:i?"success":"error"})}).on("syncKey",i=>{(!p.value||v.value)&&(p.value=i,v.value=!1)})});const E=()=>{f.emit("updateOption",{name:"autoSync",value:m.value})},z=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/wiki/About-Cloud-Sync")},g=()=>{v.value=!0,f.emit("chooseSyncKey")},$=()=>{if(!c.isPay){j("Free account not support upload configuration!");return}d.value=!1,l.value=!0,f.emit("uploadConfig",p.value)},K=()=>{_.value=!1,n.value=!0,f.emit("removeConfig")},k=i=>{if(!c.isPay){j("Free account not support sync data!");return}r.value=!1,S.value=!0,f.emit("downloadConfig",{keyPath:p.value,type:i})},H=i=>{if(!c.user){j("Please log in to your account first."),i.stopPropagation();return}};return(i,a)=>{const y=x("vsc-button"),Q=x("vsc-switch"),N=J,X=T;return C(),A(B,{class:"!mb-3"},{default:o(()=>[s("div",null,[s("div",_e,[u(t(i.$t("console.sync"))+" ",1),e(y,{class:"ml-2",size:"micro",onClick:z},{default:o(()=>a[10]||(a[10]=[s("i",{class:"el-icon-document"},null,-1)])),_:1})]),s("div",ye,[s("label",Ce,t(i.$t("console.autoSync")),1),e(Q,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=w=>m.value=w),onChange:E},null,8,["modelValue"])]),s("div",{onClickCapture:H},[e(N,{placement:"top",visible:_.value,trigger:"manual"},{reference:o(()=>[e(y,{type:"secondary",size:"mini",icon:"codicon-trash",loading:n.value,onClick:a[2]||(a[2]=w=>_.value=!0)},{default:o(()=>[u(t(i.$t("console.remove")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",$e,t(i.$t("console.removeConfirm")),1),s("div",be,[e(y,{type:"secondary",size:"mini",onClick:a[1]||(a[1]=w=>_.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(y,{size:"mini",onClick:K},{default:o(()=>[u(t(i.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(N,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(y,{icon:"codicon-cloud-upload",size:"mini",loading:l.value,onClick:a[4]||(a[4]=w=>d.value=!0)},{default:o(()=>[u(t(i.$t("console.upload")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",ke,t(i.$t("console.uploadConfirm")),1),s("div",we,[e(y,{type:"secondary",onClick:a[3]||(a[3]=w=>d.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(y,{onClick:$},{default:o(()=>[u(t(i.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(N,{placement:"top",visible:r.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(y,{icon:"codicon-cloud-download",size:"mini",loading:S.value,onClick:a[8]||(a[8]=w=>k())},{default:o(()=>[u(t(i.$t("console.download")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",he,t(i.$t("console.mergeConfirm")),1),s("div",Se,[e(y,{type:"secondary",onClick:a[5]||(a[5]=w=>r.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(y,{onClick:a[6]||(a[6]=w=>k("merge"))},{default:o(()=>[u(t(i.$t("console.merge")),1)]),_:1}),e(y,{onClick:a[7]||(a[7]=w=>k("overwrite"))},{default:o(()=>[u(t(i.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"]),s("div",ze,[e(X,{modelValue:p.value,"onUpdate:modelValue":a[9]||(a[9]=w=>p.value=w),size:"small",class:"!w-56",placeholder:"Sync Encryption Key(Optional)"},null,8,["modelValue"]),e(y,{icon:"codicon-file",size:"mini",class:"!ml-1 relative",style:{top:"3px"},onClick:g})])],32)])]),_:1})}}}),Oe={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},xe={class:"mt-3 mb-2"},Ee={class:"mt-3 mb-1"},Ae=P({__name:"OtherOptions",setup(V){b(!1);const c=()=>{f.emit("clearCache")},m=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/issues")};return(d,_)=>{const r=x("vsc-button");return C(),A(B,null,{default:o(()=>[s("div",null,[s("div",Oe,t(d.$t("console.other")),1),s("div",xe,[e(r,{icon:"codicon-chrome-close",size:"mini",onClick:_[0]||(_[0]=p=>{h(f).emit("closeAllConnections")})},{default:o(()=>[u(t(d.$t("toolbar.closeAllConnections")),1)]),_:1})]),s("div",Ee,[e(r,{icon:"codicon-github-inverted",size:"mini",onClick:m},{default:o(()=>[u(t(d.$t("toolbar.reportIssue")),1)]),_:1}),e(r,{icon:"codicon-clear-all",size:"mini",onClick:c},{default:o(()=>[u(t(d.$t("toolbar.clearCache")),1)]),_:1})])])]),_:1})}}}),Le=P({__name:"ConsoleSide",setup(V){return(c,m)=>(C(),O("div",null,[e(ge),e(Ve),e(Ae)]))}}),Pe={editor:["enableSQLVariable","enableEditorCodeLens","highlightSQLBlock","bindConnectionByActiveMark"],result:["openResultsAsVertically","splitEditorWhenQuery","autoGetTableCount"],treeView:["showUser","saveConnectionExpandedState"],sql:["escapedAllObjectName","rememberSQLVariables","capitalizeKeywordsWhenFormatting","autoPagingSQL","queryWithSchema"]};function W(V,c){const m=Pe[V];return c.filter(d=>m.includes(d.name)).sort((d,_)=>m.indexOf(d.name)-m.indexOf(_.name))}const R={escapedAllObjectName:[{value:"auto",label:"Auto"},{value:"never",label:"Never"},{value:"always",label:"Always"}]},Fe={class:"flex flex-wrap justify-center console-container"},Qe={class:"option-container"},We={class:"option-title"},Be={class:"option-list"},Ke={key:0},Ne=P({__name:"console",setup(V){const c=b([]),m=ee(()=>[{title:F("console.editorOptions"),options:W("editor",c.value),tag:"dbclient-editor"},{title:F("console.sqlOptions"),options:W("sql",c.value),tag:"dbclient-sql-parser"},{title:F("console.treeOptions"),options:W("treeView",c.value)},{title:F("console.resultOptions"),options:W("result",c.value)}]);G(async()=>{f.emit("options").on("options",({options:r})=>{c.value=r}).on("configSuccess",r=>{L({message:r,type:"success"})}).on("resetSuccess",r=>{L({message:r,type:"success"}),f.emit("options")}).init()});const d=r=>{f.emit("resetOption",r)},_=r=>{let p=r.value;r.type=="boolean"&&(p=!r.value,r.value=p),f.emit("updateOption",{...r,value:p})};return(r,p)=>{const l=x("vsc-button"),n=x("vsc-tooltip"),S=oe,v=te,E=ne;return C(),O("div",Fe,[e(Le),s("div",Qe,[(C(!0),O(I,null,U(m.value,(z,g)=>(C(),A(B,{key:g,style:{"max-width":"350px","min-width":"300px"}},{default:o(()=>[s("div",We,t(z.title),1),e(n,{title:h(F)("console.resetConfig")},{default:o(()=>[e(l,{icon:"codicon-discard",size:"micro",onClick:$=>d(z.options)},null,8,["onClick"])]),_:2},1032,["title"]),z.tag?(C(),A(n,{key:0,title:"Show More Settings"},{default:o(()=>[e(l,{icon:"codicon-ellipsis",size:"micro",onClick:$=>h(f).emit("openMoreSettings",z.tag)},null,8,["onClick"])]),_:2},1024)):q("",!0),s("div",Be,[(C(!0),O(I,null,U(z.options,($,K)=>(C(),O("div",{key:K,class:"option-item"},[h(R)[$.name]?(C(),O("div",Ke,[u(t($.description)+" ",1),e(v,{modelValue:$.value,"onUpdate:modelValue":k=>$.value=k,class:"w-28",size:"small",onChange:k=>_($)},{default:o(()=>[(C(!0),O(I,null,U(h(R)[$.name],k=>(C(),A(S,{key:k.value,value:k.value,label:k.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):$.type=="boolean"?(C(),A(E,{key:1,"model-value":$.value,onChange:k=>_($)},{default:o(()=>[u(t($.description),1)]),_:2},1032,["model-value","onChange"])):q("",!0)]))),128))])]),_:2},1024))),128))])])}}}),Ye=M(Ne,[["__scopeId","data-v-286d178f"]]);export{Ye as default};
